<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Créer un post - Mon Blog</title>

    <link rel="preconnect" href="https://fonts.bunny.net" />
    <link href="https://fonts.bunny.net/css?family=instrument-sans:400,400i,500,500i,600,600i,700,700i" rel="stylesheet" />

    <style>
      :root {
        --sand-1: #fdfdfc;
        --sand-2: #f9f9f8;
        --sand-3: #f1f0ef;
        --sand-4: #e9e8e6;
        --sand-5: #e2e1de;
        --sand-6: #dad9d6;
        --sand-7: #cfceca;
        --sand-8: #bcbbb5;
        --sand-9: #8d8d86;
        --sand-10: #82827c;
        --sand-11: #63635e;
        --sand-12: #21201c;
      }
    </style>

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Instrument Sans", "sans-serif"]
            },
            colors: {
              primary: { DEFAULT: "#5A45FF", lighter: "#a599ff" },
              sand: {
                1: "var(--sand-1)",
                2: "var(--sand-2)",
                3: "var(--sand-3)",
                4: "var(--sand-4)",
                5: "var(--sand-5)",
                6: "var(--sand-6)",
                7: "var(--sand-7)",
                8: "var(--sand-8)",
                9: "var(--sand-9)",
                10: "var(--sand-10)",
                11: "var(--sand-11)",
                12: "var(--sand-12)"
              }
            }
          }
        }
      };
    </script>

    @vite(['resources/css/app.css', 'resources/js/app.js'])
    @stack('dumper')
  </head>

  <body class="min-h-screen w-screen font-sans">
    {{-- Menu de navigation --}}
    <nav class="bg-white/80 backdrop-blur-sm border-b border-sand-4 sticky top-0 z-50">
      <div class="max-w-screen-xl mx-auto px-8">
        <div class="flex justify-between items-center h-16">
          <a href="/" class="flex items-center space-x-2">
            <div class="w-8 h-8 bg-primary/20 rounded-lg flex justify-center items-center">
              <svg class="w-5 h-5 fill-primary" viewBox="0 0 24 24">
                <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"/>
              </svg>
            </div>
            <span class="font-semibold text-sand-12">Mon Blog</span>
          </a>

          <div class="hidden md:flex items-center space-x-6">
            <a href="/" class="text-sand-11 hover:text-primary transition-colors font-medium">Accueil</a>
            <a href="/blogs" class="text-sand-11 hover:text-primary transition-colors font-medium">Articles</a>
            <a href="/projets" class="text-sand-11 hover:text-primary transition-colors font-medium">Projets</a>
            <a href="/tutoriels" class="text-sand-11 hover:text-primary transition-colors font-medium">Tutoriels</a>
            <a href="/a-propos" class="text-sand-11 hover:text-primary transition-colors font-medium">À propos</a>

            {{-- Auth links --}}
            @if(auth.user)
              <form action="/logout" method="POST" class="ml-4">
                {{ csrfField() }}
                <button type="submit" class="text-sand-11 hover:text-primary transition-colors font-medium">
                  Déconnexion
                </button>
              </form>
            @else
              <a href="/login" class="text-sand-11 hover:text-primary transition-colors font-medium">Connexion</a>
              <a href="/register" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-lighter transition-colors font-medium">S’inscrire</a>
            @endif

            <a href="/blogs/add" class="bg-primary text-white px-4 py-2 rounded-lg hover:bg-primary-lighter transition-colors font-medium">Ajouter</a>
          </div>

          {{-- Menu mobile --}}
          <div class="md:hidden">
            <button type="button" class="text-sand-11 hover:text-primary" id="mobile-menu-button">
              <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
              </svg>
            </button>
          </div>
        </div>

        <div class="md:hidden hidden" id="mobile-menu">
          <div class="py-4 space-y-2 border-t border-sand-4">
            <a href="/" class="block px-3 py-2 text-sand-11 hover:text-primary transition-colors">Accueil</a>
            <a href="/blogs" class="block px-3 py-2 text-sand-11 hover:text-primary transition-colors">Articles</a>
            <a href="/projets" class="block px-3 py-2 text-sand-11 hover:text-primary transition-colors">Projets</a>
            <a href="/tutoriels" class="block px-3 py-2 text-sand-11 hover:text-primary transition-colors">Tutoriels</a>
            <a href="/a-propos" class="block px-3 py-2 text-sand-11 hover:text-primary transition-colors">À propos</a>

            {{-- Auth mobile --}}
            @if(auth.user)
              <form action="/logout" method="POST" class="px-3 py-2">
                {{ csrfField() }}
                <button type="submit" class="text-sand-11 hover:text-primary transition-colors w-full text-left">Déconnexion</button>
              </form>
            @else
              <a href="/login" class="block px-3 py-2 text-sand-11 hover:text-primary transition-colors">Connexion</a>
              <a href="/register" class="block px-3 py-2 bg-primary text-white rounded-lg hover:bg-primary-lighter transition-colors">S’inscrire</a>
            @endif
          </div>
        </div>
      </div>
    </nav>
    @if(session.has('success'))
      <div class="alert alert-success">
        {{ session.get('success') }}
      </div>
    @endif
    {{-- Formulaire de création de post --}}
    <div class="pt-8 max-w-4xl mx-auto px-8">
      <h1 class="text-3xl font-bold text-center text-sand-12 mb-6">Créer un nouveau post</h1>
      <p class="text-center text-sand-11 mb-8">Partagez vos idées et expériences avec la communauté</p>

      <form action="/posts/create" method="POST" class="bg-white rounded-xl shadow-sm border border-sand-4 p-8 space-y-6" enctype="multipart/form-data">
        {{ csrfField() }}

        <div class="space-y-2">
          <label for="title" class="block text-sm font-semibold text-sand-12">Titre du post <span class="text-red-500">*</span></label>
          <input type="text" id="title" name="title" required placeholder="Saisissez le titre de votre post..."
            class="w-full px-4 py-3 border border-sand-4 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors outline-none text-sand-12 placeholder-sand-9" />
        </div>

        <div class="space-y-2">
          <label for="content" class="block text-sm font-semibold text-sand-12">Contenu <span class="text-red-500">*</span></label>
          <textarea id="content" name="content" required rows="10" placeholder="Rédigez le contenu de votre post ici..."
            class="w-full px-4 py-3 border border-sand-4 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors outline-none text-sand-12 placeholder-sand-9 resize-vertical min-h-[200px]"></textarea>
        </div>

        <div class="space-y-2">
          <label for="image" class="block text-sm font-semibold text-sand-12">Image (optionnel)</label>
          <input type="file" id="image" name="image_url"
            class="w-full px-4 py-3 border border-sand-4 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-colors outline-none text-sand-12 placeholder-sand-9" />
        </div>

        <div class="flex flex-col sm:flex-row gap-4 pt-4">
          <button type="submit"
            class="flex-1 bg-primary hover:bg-primary-lighter text-white font-semibold py-3 px-6 rounded-lg transition-colors flex items-center justify-center gap-2">
            Publier le post
          </button>

          <a href="/" class="flex-1 sm:flex-none bg-sand-3 hover:bg-sand-4 text-sand-11 font-semibold py-3 px-6 rounded-lg transition-colors text-center">
            Annuler
          </a>
        </div>
      </form>
    </div>

    <div class="text-sm text-center [&>code]:font-medium [&>code]:text-[#a599ff] bg-sand-12 text-sand-1 relative py-2 mt-8">
      Bienvenue sur mon blog personnel - Créé avec <code>AdonisJS</code> et hébergé avec ❤️
    </div>

    <script>
      document.getElementById('mobile-menu-button').addEventListener('click', function() {
        document.getElementById('mobile-menu').classList.toggle('hidden');
      });
    </script>
  </body>
</html>
